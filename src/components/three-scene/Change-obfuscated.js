const a0_0x322ae2=a0_0x956d;(function(_0x297bcd,_0x252639){const _0x5f2e5c=a0_0x956d,_0x55d7a8=_0x297bcd();while(!![]){try{const _0x2c5b62=parseInt(_0x5f2e5c(0x23c))/0x1+-parseInt(_0x5f2e5c(0x240))/0x2+parseInt(_0x5f2e5c(0x1d1))/0x3+parseInt(_0x5f2e5c(0x237))/0x4+parseInt(_0x5f2e5c(0x203))/0x5+-parseInt(_0x5f2e5c(0x250))/0x6*(-parseInt(_0x5f2e5c(0x1eb))/0x7)+-parseInt(_0x5f2e5c(0x20d))/0x8;if(_0x2c5b62===_0x252639)break;else _0x55d7a8['push'](_0x55d7a8['shift']());}catch(_0x16461a){_0x55d7a8['push'](_0x55d7a8['shift']());}}}(a0_0x4f24,0x9b8be));const console={'log':()=>{}};import*as a0_0x1979b1 from'three';import{Utils}from'run-scene-v2';const {getRes,getMacro}=Utils;import{MTNhw}from'./MTNhw';import{FresnelShader}from'../materials/FresnelShader';import a0_0x3b376b from'vconsole';let camera,scene,controls,renderer2,renderer,dom,t,p,runScene;const setAssets=_0x48c543=>{const _0x543839=a0_0x956d;camera=_0x48c543[_0x543839(0x1c3)],scene=_0x48c543[_0x543839(0x1d4)],controls=_0x48c543[_0x543839(0x1fe)],renderer=_0x48c543[_0x543839(0x1a1)],dom=_0x48c543['engineDom'],t=_0x48c543['t'];};function Change(_0x33808f){const _0x14a658=a0_0x956d;setAssets({..._0x33808f[_0x14a658(0x1b2)][_0x14a658(0x239)](),'t':this,'runScene':_0x33808f}),t[_0x14a658(0x258)]=_0x33808f,this[_0x14a658(0x208)]=new Events(),this[_0x14a658(0x1f1)]=new Methods(),this[_0x14a658(0x249)]=new CloneEvent(),this[_0x14a658(0x1f6)]=new ShopEvent(),this[_0x14a658(0x247)]=new TowerEvent(),this[_0x14a658(0x24e)]=new Flower(),this[_0x14a658(0x198)]=new Radial(),this[_0x14a658(0x20f)]=new KongMingLight(),this[_0x14a658(0x251)]=new LotusBgc(),this[_0x14a658(0x236)]=new Tree(),this[_0x14a658(0x21a)]=new Bubble(),this[_0x14a658(0x1ad)]=new SquareLight(),controls[_0x14a658(0x22f)]=Math['PI']/0x2-0.2,controls[_0x14a658(0x1be)]=![],_0x33808f['on'](_0x14a658(0x245),()=>{}),_0x33808f['on'](_0x14a658(0x219),async()=>{const _0x30faaa=_0x14a658;await this[_0x30faaa(0x24e)][_0x30faaa(0x1f5)](),this[_0x30faaa(0x1f6)]['init'](),this[_0x30faaa(0x247)][_0x30faaa(0x1f5)](),this['shopEvent'][_0x30faaa(0x1ee)](),this[_0x30faaa(0x198)][_0x30faaa(0x1f5)](),this[_0x30faaa(0x20f)]['init'](),this['lotusBgc'][_0x30faaa(0x1f5)](),this[_0x30faaa(0x21a)][_0x30faaa(0x1f5)](),this['squareLight'][_0x30faaa(0x1f5)]();const _0x202908=t[_0x30faaa(0x258)][_0x30faaa(0x22d)][_0x30faaa(0x1c4)](_0x30faaa(0x1c5)),_0x20d991=t[_0x30faaa(0x258)][_0x30faaa(0x22d)][_0x30faaa(0x1c4)](_0x30faaa(0x20a));this[_0x30faaa(0x23f)]=new MTNhw({'camera':camera,'scene':scene,'renderer':renderer},{'tree':_0x202908,'lightBall':_0x20d991}),this[_0x30faaa(0x23f)][_0x30faaa(0x226)][_0x30faaa(0x1a6)][_0x30faaa(0x1fa)]=0x0,this['mtnhw'][_0x30faaa(0x25a)]['uniforms'][_0x30faaa(0x24a)][_0x30faaa(0x1d9)]=0x1,this[_0x30faaa(0x1dd)]=new a0_0x1979b1[(_0x30faaa(0x205))]();const _0x57a4dd=setTimeout(()=>{clearTimeout(_0x57a4dd);},0x3e8);t[_0x30faaa(0x258)]['cb'][_0x30faaa(0x1aa)]['add'](_0x30faaa(0x1e3),()=>{const _0x274e04=_0x30faaa;t[_0x274e04(0x24e)][_0x274e04(0x24e)]&&(t['flower'][_0x274e04(0x24e)][_0x274e04(0x1df)]['y']+=0.01);}),t['runScene']['cb']['render'][_0x30faaa(0x1de)](_0x30faaa(0x21a),()=>{const _0x3a5ad2=_0x30faaa;t['bubble'][_0x3a5ad2(0x1b4)]&&(t[_0x3a5ad2(0x21a)]['fresnelUniforms']['time']['value']+=0x6*this[_0x3a5ad2(0x1dd)][_0x3a5ad2(0x213)]());});}),this[_0x14a658(0x204)]=()=>_0x33808f[_0x14a658(0x204)]();}function a0_0x4f24(){const _0x47c0cb=['2599650uPVrUZ','dispose','Clock','materialEx','none','events','isCb','修光球','type','triggerClick','6089112nVNmjr','asyncDisapper','kongMingLight','lightY','optionsEx','time','getDelta','layers','cleanUnlessLevel','createPeopleToShop','addEventListener','DynamicDrawUsage','complete','bubble','setModelAnimaNames','doorPosition','lotuModel','setUsage','removeEventListener','nianHuangTang','closeAnimaAtStart','glbLoader','keys','孔明灯','pointerUp','lightBallMesh','offsetX','radialMove','create','bias','map','replace','modelEx','clearCopyModel','maxPolarAngle','fbxLoader','autoRotateSpeed','kongMingDengMap','domTo3DSprite','mouseDown','kill','tree','2838544eRDIBB','setMatrixAt','get','fileEx','rangePosition','1081254vWXJMe','guangCangDeng','model','mtnhw','2460724TXKYbM','show','querySelector','Shedeng1_0','traverse','lazyLoadedTexture','Shedeng1_1','towerEvent','Shedeng1_3','cloneEvent','progress','light','商铺5','copyModel','flower','pointerDown','1478514hSawKF','lotusBgc','荷花背景','one','fragmentShaderEmissive','controlStart','商铺4','isOnce','runScene','nianHuaiTang','treeMaterial','values','mouse','商铺1','onBeforeCompile','cloneModel','radial','fresnelBias','random','autoRotation','TaLight_1F','clone','_loadGlb','splice','computeVertexNormals','renderer','lightAnimaEvents','孔明灯组','scale','fragmentShader','material','power','商铺3','camAnima','render','offsetY','kongMingDeng','squareLight','asyncApper','setCopyModelProperty','shangPuDeng','_gsap','assetsEx','vertexShader1','fresnelUniforms','peopleDisapper','孔明灯克隆_','loadGlb','name','getRandomRangePosition','parse','lightMap','sheDengMap','loadFbx','screenSpacePanning','remove','start','lookAt','莲花材质','camera','getModel','group38_shugan1','length','kmd','fill','fresnelScale','set','isShow','reset','Ding','setGlow','Object3D','vertexShader','214140haoSeF','children','./assets/flowerAnima.fbx','scene','push','needsUpdate','showAnima','Group','value','position','fresnelPower','TaLight_4F','clock','add','rotation','matrix','mouseUp','visible','flowerRotate','load','once','TaLight_5F','pointer','updateMatrix','TaLight_3F','downPosition','7YhEVyF','two','mouseMove','createGoldBorder','Shedeng1_2','transparent','methods','select','shopMap','treeAnima','init','shopEvent','lightControl','pointerup','fragmentParas','opacity','opc','Kong_Ming_Deng','log','controls','ren_0','peopleArray','anima','uniforms'];a0_0x4f24=function(){return _0x47c0cb;};return a0_0x4f24();}class Methods{[a0_0x322ae2(0x1c4)](_0x3388bd){const _0x5120f5=a0_0x322ae2;return t[_0x5120f5(0x258)][_0x5120f5(0x22d)][_0x5120f5(0x1c4)](_0x3388bd);}[a0_0x322ae2(0x1a9)](_0x4cf24e,_0x25ae1d,_0x54954e){const _0x4983a0=a0_0x322ae2;t[_0x4983a0(0x258)]['modelEx'][_0x4983a0(0x1a9)](t[_0x4983a0(0x258)]['modelEx']['getCamLocal'](),_0x4cf24e,_0x25ae1d,()=>{_0x54954e&&_0x54954e();});}[a0_0x322ae2(0x19b)](_0x37212e,_0x57fa31,_0x1460fa){const _0x243992=a0_0x322ae2;t[_0x243992(0x258)][_0x243992(0x1b2)][_0x243992(0x1fe)]['autoRotate']=_0x37212e,t[_0x243992(0x258)][_0x243992(0x1b2)]['controls'][_0x243992(0x231)]=_0x57fa31,_0x1460fa&&t[_0x243992(0x258)][_0x243992(0x1c3)][_0x243992(0x1c1)](_0x1460fa['x'],_0x1460fa['y'],_0x1460fa['z']);}[a0_0x322ae2(0x24b)](_0x401eaf,_0x45e541){const _0x1ee316=a0_0x322ae2;t[_0x1ee316(0x258)][_0x1ee316(0x22d)][_0x1ee316(0x1ce)](_0x401eaf,_0x45e541);}}class CloneEvent{constructor(){}[a0_0x322ae2(0x24d)](_0x7dea03){const _0x112dd0=a0_0x322ae2,_0x493aa5=t[_0x112dd0(0x258)][_0x112dd0(0x22d)][_0x112dd0(0x19d)](_0x7dea03);return _0x493aa5;}[a0_0x322ae2(0x1af)](_0x334b55,_0x565a36){const _0x1589a8=a0_0x322ae2;_0x334b55['visible']=_0x565a36[_0x1589a8(0x1e2)],_0x334b55[_0x1589a8(0x1da)][_0x1589a8(0x1ca)](_0x565a36[_0x1589a8(0x1da)]['x'],_0x565a36[_0x1589a8(0x1da)]['y'],_0x565a36[_0x1589a8(0x1da)]['z']),_0x334b55[_0x1589a8(0x1a6)]=_0x334b55[_0x1589a8(0x1a6)][_0x1589a8(0x19d)](),_0x334b55['material'][_0x1589a8(0x1f0)]=!![],_0x334b55[_0x1589a8(0x1a6)][_0x1589a8(0x1fa)]=_0x565a36[_0x1589a8(0x1fa)],t[_0x1589a8(0x258)][_0x1589a8(0x22d)][_0x1589a8(0x1de)](_0x334b55);}[a0_0x322ae2(0x22e)](_0x3a28d1){const _0x397d03=a0_0x322ae2;t[_0x397d03(0x258)][_0x397d03(0x22d)][_0x397d03(0x1bf)](_0x3a28d1);}}class ShopEvent{constructor(){}['shopMap'];['cloneModel'];[a0_0x322ae2(0x1f5)](){const _0x59505c=a0_0x322ae2;console[_0x59505c(0x1fd)](t[_0x59505c(0x258)]),this['cloneModel']=t[_0x59505c(0x1f1)]['getModel']('SP人'),this[_0x59505c(0x1f3)]={'商铺1':{'borderPosition':t[_0x59505c(0x1f1)]['getModel'](_0x59505c(0x25d)),'rangePosition':{'x':678.6546835703366,'y':2.4338684543174005},'beginZ':-19.249096344726695,'endZ':43.28590330612664,'doorPosition':{'x':715.348489344153,'y':2.4338684543174005,'z':-2.304479250308624}},'商铺2':{'borderPosition':t['methods'][_0x59505c(0x1c4)]('商铺2'),'rangePosition':{'x':678.6546835703366,'y':2.4338684543174005},'beginZ':-97.90748487526992,'endZ':-29.948062302714305,'doorPosition':{'x':715.348489344153,'y':2.4338684543174005,'z':-54.87039269263238}},'商铺3':{'borderPosition':t['methods']['getModel'](_0x59505c(0x1a8)),'rangePosition':{'x':678.6546835703366,'y':2.4338684543174005},'beginZ':-269.4245635718405,'endZ':-118.81279417207509,'doorPosition':{'x':723.711786090452,'y':2.4338684543174005,'z':-164.83815329826535}},'商铺4':{'borderPosition':t[_0x59505c(0x1f1)][_0x59505c(0x1c4)](_0x59505c(0x256)),'rangePosition':{'x':678.6546835703366,'y':2.4338684543174005},'beginZ':-488.590102485558,'endZ':-295.1254954925516,'doorPosition':{'x':728.0633357623165,'y':2.4338684543174005,'z':-371.1869252100583}},'商铺5':{'borderPosition':t[_0x59505c(0x1f1)]['getModel'](_0x59505c(0x24c)),'rangePosition':{'x':678.6546835703366,'y':2.4338684543174005},'beginZ':-790.1440452896151,'endZ':-538.4303428427537,'doorPosition':{'x':735.1260245065873,'y':2.4338684543174005,'z':-691.1992070890307}}};}[a0_0x322ae2(0x1b9)](_0x2661ff,_0xc449e6){const _0x2bbe63=a0_0x322ae2;return Math[_0x2bbe63(0x19a)]()*(_0x2661ff-_0xc449e6)+_0xc449e6;}[a0_0x322ae2(0x216)](_0x42e03e,_0x5dfb55){const _0x3670a7=a0_0x322ae2;for(let _0x3e4bf3=0x0;_0x3e4bf3<_0x42e03e;_0x3e4bf3++){let _0x45c268=t['cloneEvent'][_0x3670a7(0x24d)](this[_0x3670a7(0x25f)]);t[_0x3670a7(0x249)][_0x3670a7(0x1af)](_0x45c268,{'visible':!![],'position':{'x':this['shopMap'][_0x5dfb55][_0x3670a7(0x23b)]['x'],'y':this[_0x3670a7(0x1f3)][_0x5dfb55][_0x3670a7(0x23b)]['y'],'z':this['getRandomRangePosition'](this[_0x3670a7(0x1f3)][_0x5dfb55]['endZ'],this[_0x3670a7(0x1f3)][_0x5dfb55]['beginZ'])},'opacity':0x0}),console[_0x3670a7(0x1fd)](scene[_0x3670a7(0x1d2)],'1'),Utils[_0x3670a7(0x201)]({'opc':0x0},{'opc':0x1},0.5,_0x1656f5=>{const _0x521a43=_0x3670a7;_0x45c268[_0x521a43(0x1a6)]['opacity']=_0x1656f5[_0x521a43(0x1fb)];},()=>{const _0x246af0=_0x3670a7;Utils[_0x246af0(0x201)]({'x':_0x45c268[_0x246af0(0x1da)]['x'],'y':_0x45c268['position']['y'],'z':_0x45c268[_0x246af0(0x1da)]['z']},{'x':this[_0x246af0(0x1f3)][_0x5dfb55][_0x246af0(0x21c)]['x'],'y':this[_0x246af0(0x1f3)][_0x5dfb55][_0x246af0(0x21c)]['y'],'z':this[_0x246af0(0x1f3)][_0x5dfb55]['doorPosition']['z']},1.5,_0x396f93=>{const _0x59df79=_0x246af0;_0x45c268[_0x59df79(0x1da)]['x']=_0x396f93['x'],_0x45c268[_0x59df79(0x1da)]['y']=_0x396f93['y'],_0x45c268[_0x59df79(0x1da)]['z']=_0x396f93['z'],console[_0x59df79(0x1fd)](scene[_0x59df79(0x1d2)][_0x59df79(0x1c6)],'2');},()=>{const _0x3c562e=_0x246af0;t[_0x3c562e(0x249)]['clearCopyModel'](_0x45c268),console[_0x3c562e(0x1fd)](scene[_0x3c562e(0x1d2)][_0x3c562e(0x1c6)],'3');});});}}[a0_0x322ae2(0x1ee)](){const _0x166d44=a0_0x322ae2;Object[_0x166d44(0x223)](this[_0x166d44(0x1f3)])['map'](_0x1a9b16=>{const _0xb07525=_0x166d44;let _0x4f3ba6=document[_0xb07525(0x242)]('.'+_0x1a9b16+'金币');getMacro(()=>{const _0x49247a=_0xb07525;_0x4f3ba6['classList'][_0x49247a(0x1de)](_0x49247a(0x207));},0x1f4);let _0x38d629=Utils[_0xb07525(0x233)](_0x4f3ba6);_0x38d629[_0xb07525(0x1da)]['y']+=0x64,this[_0xb07525(0x1f3)][_0x1a9b16]['borderPosition'][_0xb07525(0x1de)](_0x38d629);});}}class TowerEvent{constructor(){}[a0_0x322ae2(0x25f)];[a0_0x322ae2(0x200)]=[];[a0_0x322ae2(0x1bb)]={};[a0_0x322ae2(0x1f5)](){const _0x15b8df=a0_0x322ae2;this['cloneModel']=t['methods'][_0x15b8df(0x1c4)](_0x15b8df(0x1ff)),this[_0x15b8df(0x1bb)]={'1楼':t[_0x15b8df(0x1f1)][_0x15b8df(0x1c4)](_0x15b8df(0x19c)),'2楼':t[_0x15b8df(0x1f1)][_0x15b8df(0x1c4)]('TaLight_2F'),'3楼':t[_0x15b8df(0x1f1)][_0x15b8df(0x1c4)](_0x15b8df(0x1e9)),'4楼':t[_0x15b8df(0x1f1)][_0x15b8df(0x1c4)](_0x15b8df(0x1dc)),'5楼':t['methods']['getModel'](_0x15b8df(0x1e6)),'顶楼':t[_0x15b8df(0x1f1)]['getModel'](_0x15b8df(0x1cd))};}['asyncApper'](){return new Promise(_0x54ffba=>{const _0x40b41a=a0_0x956d;let _0x1aa0a8=t[_0x40b41a(0x249)][_0x40b41a(0x24d)](this[_0x40b41a(0x25f)]),_0x1b2c8c=Math['random']()*(667.0088975117958-446.2797211064844)+446.2797211064844,_0x3f083d=Math['random']()*(-473.85379186803544- -641.029637905563)+-641.029637905563;_0x3f083d<=-0x25b&&_0x3f083d>=-0x2ae&&_0x1b2c8c<=0x279&&_0x1b2c8c>=0x20f&&(_0x1b2c8c=0x20f||0x279,_0x3f083d=-0x25b||-0x2ae),t['cloneEvent'][_0x40b41a(0x1af)](_0x1aa0a8,{'visible':!![],'position':{'x':_0x1b2c8c,'y':0x0,'z':_0x3f083d},'opacity':0x0}),_0x1aa0a8[_0x40b41a(0x1c1)](581.4321928755762,0x0,-702.6268867583516),this[_0x40b41a(0x200)][_0x40b41a(0x1d5)](_0x1aa0a8),Utils['anima']({'opc':0x0},{'opc':0x1},0.2,_0x4c2b22=>{const _0x5e4fd2=_0x40b41a;_0x1aa0a8[_0x5e4fd2(0x1a6)][_0x5e4fd2(0x1fa)]=_0x4c2b22[_0x5e4fd2(0x1fb)];},()=>{_0x54ffba();});});}[a0_0x322ae2(0x20e)](_0x26dd07){return new Promise(_0xcfa77d=>{Utils['anima']({'opc':0x1},{'opc':0x0},0.2,_0x1beccc=>{const _0x2b6947=a0_0x956d;_0x26dd07[_0x2b6947(0x1a6)][_0x2b6947(0x1fa)]=_0x1beccc[_0x2b6947(0x1fb)];},()=>{const _0x36afae=a0_0x956d;t[_0x36afae(0x249)]['clearCopyModel'](_0x26dd07),_0xcfa77d();});});}async['peopleApper'](_0x3a548d){const _0x3b1ee0=a0_0x322ae2;if(_0x3a548d>=0x14)_0x3a548d=0x14;for(let _0x2adb07=0x0;_0x2adb07<_0x3a548d;_0x2adb07++){await this[_0x3b1ee0(0x1ae)]();}}async[a0_0x322ae2(0x1b5)](_0x19938f){const _0x3e22ca=a0_0x322ae2;if(_0x19938f>=this[_0x3e22ca(0x200)][_0x3e22ca(0x1c6)])_0x19938f=this[_0x3e22ca(0x200)]['length'];if(_0x19938f==0x0)return;for(let _0x238d40=0x0;_0x238d40<_0x19938f;_0x238d40++){await this[_0x3e22ca(0x20e)](this[_0x3e22ca(0x200)][0x0]),this[_0x3e22ca(0x200)][_0x3e22ca(0x19f)](0x0,0x1);}}[a0_0x322ae2(0x1f7)](_0x54d9c7,_0xf73a99){const _0x4cdda9=a0_0x322ae2;this[_0x4cdda9(0x1bb)][_0x54d9c7]['visible']=_0xf73a99;}}class Flower{[a0_0x322ae2(0x222)]=t[a0_0x322ae2(0x258)]['loaderer']['gltf'];[a0_0x322ae2(0x230)]=t[a0_0x322ae2(0x258)][a0_0x322ae2(0x23a)];['flower']=null;async['init'](){const _0x3ef4da=a0_0x322ae2,{material:_0x2bf480}=await this[_0x3ef4da(0x1b7)](),_0x5c592e=await this[_0x3ef4da(0x1bd)](_0x3ef4da(0x1d3),_0x2bf480);t[_0x3ef4da(0x258)]['anima'][_0x3ef4da(0x21b)](_0x5c592e,['flower']),t['runScene'][_0x3ef4da(0x22d)][_0x3ef4da(0x1de)](_0x5c592e),this[_0x3ef4da(0x24e)]=_0x5c592e,this[_0x3ef4da(0x24e)][_0x3ef4da(0x1e2)]=![],this[_0x3ef4da(0x24e)][_0x3ef4da(0x1da)][_0x3ef4da(0x1ca)](582.1630877495076,318.1238684195186,-742.0680735984594);}['_loadGlb'](_0x2e1eb7){const _0x2c7d8c=a0_0x322ae2;if(_0x2e1eb7[_0x2c7d8c(0x1c6)]===0x1)return _0x2e1eb7[0x0];const _0x3232b8=new a0_0x1979b1['Group']();return _0x3232b8['add'](..._0x2e1eb7),_0x3232b8;}async[a0_0x322ae2(0x1b7)](){const _0x3a7584=a0_0x322ae2,_0x1cfc06=await this[_0x3a7584(0x222)][_0x3a7584(0x1e4)]('./assets/flowerMaterial.glb',{'addToScene':![],'triggerCb':![]}),_0x377518=this[_0x3a7584(0x19e)](_0x1cfc06);return _0x377518[_0x3a7584(0x1b8)]=_0x3a7584(0x1c2),_0x377518;}async[a0_0x322ae2(0x1bd)](_0x49a0d2,_0x4f03f9){const _0x2e5aa3=a0_0x322ae2,_0x3341ab=this[_0x2e5aa3(0x230)]['parses']['fbx'][_0x2e5aa3(0x1ba)](await getRes(_0x49a0d2),'');return _0x3341ab['traverse'](_0x4df7cd=>{const _0x160934=_0x2e5aa3;t[_0x160934(0x258)][_0x160934(0x22d)][_0x160934(0x1ce)](_0x4df7cd,!![]),_0x4df7cd[_0x160934(0x1a6)]&&(_0x4df7cd[_0x160934(0x1a6)]=t['runScene'][_0x160934(0x206)][_0x160934(0x229)](),_0x4df7cd['material']=_0x4f03f9[_0x160934(0x19d)](),_0x4df7cd['material'][_0x160934(0x1d6)]=!![],_0x4df7cd[_0x160934(0x1a6)][_0x160934(0x1f0)]=!![],_0x4df7cd['material'][_0x160934(0x1fa)]=0x0);}),t[_0x2e5aa3(0x258)]['sceneEx'][_0x2e5aa3(0x215)](_0x3341ab);}async[a0_0x322ae2(0x241)](_0x5cdd2d,_0x585cd3){const _0x224573=a0_0x322ae2;t['events'][_0x224573(0x1d7)]({'model':this[_0x224573(0x24e)],'isShow':_0x5cdd2d,'time':0x4}),t[_0x224573(0x258)][_0x224573(0x201)]['play']('flower',{'onFinished'(){const _0x51b134=_0x224573;t[_0x51b134(0x208)][_0x51b134(0x1d7)]({'model':t[_0x51b134(0x24e)][_0x51b134(0x24e)],'isShow':![],'time':0x2,'cb':_0x585cd3});}});}}class Radial{['sheDengMap']=null;['init'](){const _0x2254a7=a0_0x322ae2;this['sheDengMap']={'Shedeng1':{'model':t['methods'][_0x2254a7(0x1c4)]('Shedeng1'),'rotation':{'x':99.42819143073471,'y':-2.8734593602424665,'z':166.82574475465094},'time':0x3e8},'Shedeng1_0':{'model':t[_0x2254a7(0x1f1)][_0x2254a7(0x1c4)](_0x2254a7(0x243)),'rotation':{'x':90.3934209371448,'y':17.73703333007011,'z':-109.30617576220645},'time':0x3e8},'Shedeng1_1':{'model':t['methods'][_0x2254a7(0x1c4)](_0x2254a7(0x246)),'rotation':{'x':0x32,'y':-2.8734593602424665,'z':150.82574475465094},'time':0x3e8},'Shedeng1_2':{'model':t[_0x2254a7(0x1f1)][_0x2254a7(0x1c4)](_0x2254a7(0x1ef)),'rotation':{'x':60.42819143073471,'y':-2.8734593602424665,'z':126.82574475465094},'time':0x3e8},'Shedeng1_3':{'model':t['methods'][_0x2254a7(0x1c4)](_0x2254a7(0x248)),'rotation':{'x':-1.7718410164401246,'y':1.287409187499856,'z':-2.02599349243394},'time':0x14},'Shedeng1_4':{'model':t[_0x2254a7(0x1f1)]['getModel']('Shedeng1_4'),'rotation':{'x':-1.7701299049516555,'y':-0.8572125165982781,'z':-0.10905107736147579},'time':0x14}},this[_0x2254a7(0x228)]();}['radialMove'](){const _0x3aef91=a0_0x322ae2;Object[_0x3aef91(0x25b)](this[_0x3aef91(0x1bc)])[_0x3aef91(0x22b)](_0x23394d=>{const _0x57ce52=_0x3aef91,{rotation:_0x3fdddd,time:_0xda47fc}=_0x23394d;Utils[_0x57ce52(0x201)]({'x':_0x23394d[_0x57ce52(0x23e)][_0x57ce52(0x1df)]['x'],'y':_0x23394d[_0x57ce52(0x23e)]['rotation']['y'],'z':_0x23394d[_0x57ce52(0x23e)][_0x57ce52(0x1df)]['z']},{'repeat':-0x1,'yoyo':!![],'x':_0x3fdddd['x'],'y':_0x3fdddd['y'],'z':_0x3fdddd['z']},_0xda47fc,_0x1af050=>{const _0x53c00f=_0x57ce52;_0x23394d['model'][_0x53c00f(0x1df)]['x']=_0x1af050['x'],_0x23394d[_0x53c00f(0x23e)][_0x53c00f(0x1df)]['y']=_0x1af050['y'],_0x23394d[_0x53c00f(0x23e)][_0x53c00f(0x1df)]['z']=_0x1af050['z'];});});}}function a0_0x956d(_0x324f9c,_0x559f9e){const _0x4f242f=a0_0x4f24();return a0_0x956d=function(_0x956d25,_0x918c14){_0x956d25=_0x956d25-0x198;let _0x1f6a51=_0x4f242f[_0x956d25];return _0x1f6a51;},a0_0x956d(_0x324f9c,_0x559f9e);}class KongMingLight{[a0_0x322ae2(0x230)]=t[a0_0x322ae2(0x258)]['fileEx'];[a0_0x322ae2(0x232)]={};[a0_0x322ae2(0x257)]=!![];[a0_0x322ae2(0x1a2)]={};[a0_0x322ae2(0x1fc)]={};[a0_0x322ae2(0x209)]=!![];async[a0_0x322ae2(0x1f5)](){const _0x7c46ee=a0_0x322ae2;this['kongMingDeng']=t[_0x7c46ee(0x1f1)][_0x7c46ee(0x1c4)](_0x7c46ee(0x224));const _0x490d6c=0x19;new Array(0x5)[_0x7c46ee(0x1c8)]('')['map']((_0x517697,_0x28d98a)=>{const _0x2f1dea=_0x7c46ee,{geometry:_0x192e00,material:_0x38929d}=this[_0x2f1dea(0x1ac)];_0x192e00[_0x2f1dea(0x1a0)](),this[_0x2f1dea(0x1fc)][_0x2f1dea(0x1c7)+_0x28d98a]=new a0_0x1979b1['InstancedMesh'](_0x192e00['clone'](),_0x38929d,_0x490d6c),this[_0x2f1dea(0x1fc)][_0x2f1dea(0x1c7)+_0x28d98a]['instanceMatrix'][_0x2f1dea(0x21e)](a0_0x1979b1[_0x2f1dea(0x218)]);const _0xbad01=new a0_0x1979b1[(_0x2f1dea(0x1cf))]();for(let _0x124373=0x0;_0x124373<_0x490d6c;_0x124373++){let _0x59ba0d=Math[_0x2f1dea(0x19a)]()*0xc8,_0x3ca9fe=Math[_0x2f1dea(0x19a)]()*0x3e8,_0x446612=-Math['random']()*0x3e8;_0xbad01[_0x2f1dea(0x1da)][_0x2f1dea(0x1ca)](_0x3ca9fe,_0x59ba0d,_0x446612),_0xbad01[_0x2f1dea(0x1df)][_0x2f1dea(0x1ca)](-Math['PI']/0x2,0x0,0x0),_0xbad01[_0x2f1dea(0x1a4)]['set'](0x2,0x2,0x2),this[_0x2f1dea(0x1fc)][_0x2f1dea(0x1c7)+_0x28d98a][_0x2f1dea(0x238)](_0x124373,_0xbad01[_0x2f1dea(0x1e0)]),this[_0x2f1dea(0x232)][_0x2f1dea(0x1b6)+_0x28d98a+_0x124373]={'id':_0x124373,'model':this[_0x2f1dea(0x1fc)]['kmd'+_0x28d98a],'oldPositionY':_0x59ba0d},_0xbad01[_0x2f1dea(0x1e8)](),this[_0x2f1dea(0x1fc)][_0x2f1dea(0x1c7)+_0x28d98a]['instanceMatrix'][_0x2f1dea(0x1d6)]=!![],this[_0x2f1dea(0x1fc)][_0x2f1dea(0x1c7)+_0x28d98a][_0x2f1dea(0x1e2)]=![];}this['Kong_Ming_Deng'][_0x2f1dea(0x1c7)+_0x28d98a]['name']=_0x2f1dea(0x1a3)+(_0x28d98a+0x1),t[_0x2f1dea(0x258)][_0x2f1dea(0x22d)][_0x2f1dea(0x1de)](this[_0x2f1dea(0x1fc)][_0x2f1dea(0x1c7)+_0x28d98a]);});}['anima'](_0x16d99d){return new Promise(_0xeaa79a=>{const _0x3c5eb1=a0_0x956d;Object[_0x3c5eb1(0x25b)](this[_0x3c5eb1(0x1fc)])[_0x3c5eb1(0x22b)]((_0x2a3d87,_0x2609f9)=>{const _0xf817df=_0x3c5eb1;if(this[_0xf817df(0x1a2)][_0x2a3d87[_0xf817df(0x1b8)]])this[_0xf817df(0x1a2)]?this[_0xf817df(0x1a2)][_0x2a3d87['name']][_0xf817df(0x235)]():null;const _0x47f373={'light':_0x2a3d87,'name':_0x2a3d87[_0xf817df(0x1b8)],'s':_0xeaa79a,'cb':_0x16d99d,'index':_0x2609f9};this['_gsap'](_0x47f373);});})['then'](()=>{_0x16d99d();});}[a0_0x322ae2(0x1b1)](_0x1d1bf9){const _0xa70e00=a0_0x322ae2,{light:_0x4b0b1e,name:_0x354fb8,s:_0x5d20e0,cb:_0x389780,index:_0x4fdb46}=_0x1d1bf9;_0x4b0b1e['layers']['enable'](0x1),_0x4b0b1e[_0xa70e00(0x1e2)]=!![],_0x4b0b1e['position']['y']=0x0;const _0x3d8a38=Math[_0xa70e00(0x19a)]()*0x1f4,_0x5e1eb0=(Math[_0xa70e00(0x19a)]()+0.6)*0x19;this['lightAnimaEvents'][_0x354fb8]=Utils[_0xa70e00(0x201)]({'lightY':_0x4b0b1e[_0xa70e00(0x1da)]['y'],'opc':0x1},{'lightY':_0x3d8a38,'opc':0x0},_0x5e1eb0,_0x5dfb05=>{const _0x5bc2ab=_0xa70e00;_0x4b0b1e[_0x5bc2ab(0x1da)]['y']=_0x5dfb05[_0x5bc2ab(0x210)];},()=>{const _0x19fd65=_0xa70e00;_0x4b0b1e[_0x19fd65(0x1e2)]=![];if(_0x4fdb46+0x1===Object['values'](this[_0x19fd65(0x1fc)])[_0x19fd65(0x1c6)])_0x5d20e0();});}}class LotusBgc{[a0_0x322ae2(0x21d)]=null;[a0_0x322ae2(0x1f5)](){const _0x3e0451=a0_0x322ae2;this[_0x3e0451(0x21d)]=t['methods'][_0x3e0451(0x1c4)](_0x3e0451(0x252));}async[a0_0x322ae2(0x1cb)](_0x922600,_0xed9941,_0x3f3bb7){const _0x18eaed=a0_0x322ae2;console['log'](this[_0x18eaed(0x21d)],'this.lotuModel'),t['events'][_0x18eaed(0x1d7)]({'model':this['lotuModel'],'isShow':_0x922600,'time':_0x3f3bb7,'cb':_0xed9941});}}class Tree{['once']=!![];['treeAnima']={};[a0_0x322ae2(0x201)](){const _0x3ef949=a0_0x322ae2;this['reset'](),this[_0x3ef949(0x1f4)][_0x3ef949(0x253)]=Utils[_0x3ef949(0x201)]({'pg':0x1},{'pg':0x0},0x6,_0x34ec6a=>{const _0x5592cd=_0x3ef949;t[_0x5592cd(0x23f)][_0x5592cd(0x25a)][_0x5592cd(0x202)]['progress'][_0x5592cd(0x1d9)]=_0x34ec6a['pg'];if(_0x34ec6a['pg']<=0.5&&this[_0x5592cd(0x1e5)]){this['once']=![];if(this[_0x5592cd(0x1e5)])return;this[_0x5592cd(0x1f4)][_0x5592cd(0x1ec)]&&this[_0x5592cd(0x1f4)]['two'][_0x5592cd(0x235)](),t['mtnhw'][_0x5592cd(0x226)][_0x5592cd(0x1a6)][_0x5592cd(0x1fa)]=0x0,t['tree'][_0x5592cd(0x1f4)]['two']=Utils['anima']({'opc':0x0},{'opc':0x1},0x2,_0x27551c=>{const _0x57d577=_0x5592cd;t['mtnhw']['lightBallMesh'][_0x57d577(0x1a6)][_0x57d577(0x1fa)]=_0x27551c[_0x57d577(0x1fb)];});}},()=>{const _0x4b9a5b=_0x3ef949;this['once']=!![],t[_0x4b9a5b(0x23f)][_0x4b9a5b(0x226)][_0x4b9a5b(0x1a6)][_0x4b9a5b(0x1fa)]=0x0,t['mtnhw']['treeMaterial'][_0x4b9a5b(0x202)][_0x4b9a5b(0x24a)]['value']=0x1;});}[a0_0x322ae2(0x1cc)](){const _0x1b24f2=a0_0x322ae2;this[_0x1b24f2(0x1e5)]=!![],t[_0x1b24f2(0x23f)][_0x1b24f2(0x25a)][_0x1b24f2(0x202)]['progress'][_0x1b24f2(0x1d9)]=0x1,t[_0x1b24f2(0x23f)][_0x1b24f2(0x226)][_0x1b24f2(0x1a6)][_0x1b24f2(0x1fa)]=0x0,this[_0x1b24f2(0x1f4)][_0x1b24f2(0x1ec)]&&this['treeAnima'][_0x1b24f2(0x1ec)][_0x1b24f2(0x235)](),this['treeAnima'][_0x1b24f2(0x253)]&&this[_0x1b24f2(0x1f4)][_0x1b24f2(0x253)][_0x1b24f2(0x235)]();}}class Bubble{['bubble']=null;['fresnelUniforms']=undefined;[a0_0x322ae2(0x1f5)](){const _0x2d841a=a0_0x322ae2;this['bubble']=t[_0x2d841a(0x1f1)]['getModel']('水泡'),this[_0x2d841a(0x21a)][_0x2d841a(0x1e2)]=!![],this[_0x2d841a(0x21a)][_0x2d841a(0x1a4)][_0x2d841a(0x1ca)](0x0,0x0,0x0),this[_0x2d841a(0x1b4)]=FresnelShader[_0x2d841a(0x202)],this[_0x2d841a(0x21a)][_0x2d841a(0x1a6)][_0x2d841a(0x25e)]=_0x270036=>{const _0x66c4f9=_0x2d841a;if(!_0x270036[_0x66c4f9(0x202)][_0x66c4f9(0x212)])_0x270036[_0x66c4f9(0x202)][_0x66c4f9(0x212)]=this[_0x66c4f9(0x1b4)]['time'];if(!_0x270036[_0x66c4f9(0x202)][_0x66c4f9(0x199)])_0x270036[_0x66c4f9(0x202)]['fresnelBias']=this[_0x66c4f9(0x1b4)][_0x66c4f9(0x22a)];if(!_0x270036['uniforms'][_0x66c4f9(0x1c9)])_0x270036[_0x66c4f9(0x202)]['fresnelScale']=this[_0x66c4f9(0x1b4)][_0x66c4f9(0x1a4)];if(!_0x270036[_0x66c4f9(0x202)][_0x66c4f9(0x1db)])_0x270036[_0x66c4f9(0x202)][_0x66c4f9(0x1db)]=this[_0x66c4f9(0x1b4)][_0x66c4f9(0x1a7)];_0x270036['vertexShader']=_0x270036[_0x66c4f9(0x1d0)]['replace'](/varying vec3 vWorldPosition;/g,FresnelShader['vertexParas']),_0x270036[_0x66c4f9(0x1d0)]=_0x270036[_0x66c4f9(0x1d0)][_0x66c4f9(0x22c)](/#include <begin_vertex>/g,FresnelShader[_0x66c4f9(0x1b3)]),_0x270036[_0x66c4f9(0x1d0)]=_0x270036[_0x66c4f9(0x1d0)][_0x66c4f9(0x22c)](/vWorldPosition = worldPosition.xyz;/g,FresnelShader['vertexShader2']),_0x270036[_0x66c4f9(0x1a5)]=_0x270036[_0x66c4f9(0x1a5)][_0x66c4f9(0x22c)](/#include <transmission_pars_fragment>/g,FresnelShader[_0x66c4f9(0x1f9)]),_0x270036[_0x66c4f9(0x1a5)]=_0x270036['fragmentShader'][_0x66c4f9(0x22c)](/vec3 totalEmissiveRadiance = emissive;/g,FresnelShader[_0x66c4f9(0x254)]);};}[a0_0x322ae2(0x208)](){const _0x2a6354=a0_0x322ae2;Utils[_0x2a6354(0x201)]({'scale':0x0},{'scale':0x1},0x3,_0x313dbd=>{const _0x352dcc=_0x2a6354;this[_0x352dcc(0x21a)]['scale']['set'](_0x313dbd['scale'],_0x313dbd[_0x352dcc(0x1a4)],_0x313dbd[_0x352dcc(0x1a4)]);},()=>{let _0x3dfd0b=setTimeout(()=>{const _0x48e9d2=a0_0x956d;this[_0x48e9d2(0x21a)][_0x48e9d2(0x1a4)]['set'](0x0,0x0,0x0),clearTimeout(_0x3dfd0b);},0xbb8);});}}class SquareLight{[a0_0x322ae2(0x220)]=null;['guangCangDeng']=null;[a0_0x322ae2(0x1f5)](){const _0x1c26a7=a0_0x322ae2;this[_0x1c26a7(0x259)]=t['runScene'][_0x1c26a7(0x22d)][_0x1c26a7(0x1c4)]('拈花堂亮灯group'),this[_0x1c26a7(0x23d)]=t[_0x1c26a7(0x258)][_0x1c26a7(0x22d)]['getModel']('广场亮灯group'),this[_0x1c26a7(0x1b0)]=t[_0x1c26a7(0x258)][_0x1c26a7(0x22d)][_0x1c26a7(0x1c4)]('商铺亮灯group');}['niangHuaiTangEvents'](_0x46f87e){const _0x4ae71=a0_0x322ae2;this[_0x4ae71(0x259)][_0x4ae71(0x1e2)]=_0x46f87e;}['guangCangDengEvents'](_0x477f55){const _0x3d4550=a0_0x322ae2;this[_0x3d4550(0x23d)]['children'][_0x3d4550(0x22b)](_0x29bf9b=>{const _0xc50cae=_0x3d4550;_0x29bf9b[_0xc50cae(0x1b8)]==='Shedeng2'?_0x29bf9b[_0xc50cae(0x1e2)]=_0x477f55:t[_0xc50cae(0x258)][_0xc50cae(0x22d)]['setGlow'](_0x29bf9b,_0x477f55);});}['shangPuDengEvents'](_0x501c74){const _0x325860=a0_0x322ae2;this[_0x325860(0x1b0)][_0x325860(0x244)](_0x341368=>{const _0x2954b5=_0x325860;_0x341368['layers']&&(_0x341368['layers']['mask']=_0x501c74?0x3:0x1),_0x341368[_0x2954b5(0x214)]&&t[_0x2954b5(0x258)]['modelEx'][_0x2954b5(0x1ce)](_0x341368,_0x501c74);});}}class Events{constructor(){const _0x424b00=a0_0x322ae2;controls[_0x424b00(0x217)](_0x424b00(0x1c0),this[_0x424b00(0x255)]),t['runScene']['optionsEx']['cb'][_0x424b00(0x208)][_0x424b00(0x1e7)]['down']['add'](_0x424b00(0x24f),this[_0x424b00(0x234)]),t[_0x424b00(0x258)][_0x424b00(0x211)]['cb'][_0x424b00(0x208)]['pointer']['up'][_0x424b00(0x1de)](_0x424b00(0x225),this['mouseUp']),t[_0x424b00(0x258)]['optionsEx']['cb'][_0x424b00(0x208)][_0x424b00(0x25c)]['move']['add'](_0x424b00(0x1ed),()=>{});}['showAnima'](_0x5d0fcc){const _0x259aa8=a0_0x322ae2,{model:_0x232442,isShow:_0xde2bd3,time:_0x38a926,cb:_0x2568fe}=_0x5d0fcc,_0x16ea32=[];_0x232442[_0x259aa8(0x244)](_0x378802=>{const _0x2a7eff=_0x259aa8;if(_0x378802[_0x2a7eff(0x20b)]===_0x2a7eff(0x1d8))return;if(_0x378802['type']===_0x2a7eff(0x1cf))return;_0x378802[_0x2a7eff(0x1a6)]['transparent']=!![],_0xde2bd3?_0x378802[_0x2a7eff(0x1a6)][_0x2a7eff(0x1fa)]=0x0:null,_0x16ea32[_0x2a7eff(0x1d5)](_0x378802);});if(_0xde2bd3)_0x232442[_0x259aa8(0x1e2)]=_0xde2bd3;Utils[_0x259aa8(0x201)]({'opc':_0xde2bd3?0x0:0x1},{'opc':_0xde2bd3?0x1:0x0},_0x38a926,_0x5b9a47=>{const _0x44ae10=_0x259aa8;_0x16ea32[_0x44ae10(0x22b)](_0x8fb451=>_0x8fb451[_0x44ae10(0x1a6)]['opacity']=_0x5b9a47[_0x44ae10(0x1fb)]);},()=>{const _0x8a0b9c=_0x259aa8;if(!_0xde2bd3)_0x232442[_0x8a0b9c(0x1e2)]=_0xde2bd3;_0x2568fe&&_0x2568fe();});}[a0_0x322ae2(0x1ea)]={'x':0x0,'y':0x0};[a0_0x322ae2(0x221)]={};['mouseDown']=_0x554141=>{const _0x13281a=a0_0x322ae2;this[_0x13281a(0x1ea)]={'x':_0x554141[_0x13281a(0x227)],'y':_0x554141[_0x13281a(0x1ab)]};};[a0_0x322ae2(0x1e1)]=_0x32b320=>{const _0x185b2b=a0_0x322ae2;if(_0x32b320['button']===0x2)return;const _0x598ec7=_0x32b320[_0x185b2b(0x227)],_0x1ceebe=_0x32b320['offsetY'],{x:_0xd271e9,y:_0x2fe4bb}=this['downPosition'];_0x598ec7===_0xd271e9&&_0x1ceebe===_0x2fe4bb&&this['triggerClick'](_0x32b320);};[a0_0x322ae2(0x20c)]=_0x2aa93e=>{const _0x3a78e3=a0_0x322ae2,_0x1673e0=t[_0x3a78e3(0x258)][_0x3a78e3(0x22d)][_0x3a78e3(0x1f2)];if(!_0x1673e0)return;};[a0_0x322ae2(0x255)]=()=>{};['closeAnmia'](){const _0x1c1348=a0_0x322ae2;Object[_0x1c1348(0x25b)](this['closeAnimaAtStart'])[_0x1c1348(0x22b)](_0x3b919c=>_0x3b919c&&_0x3b919c['kill']());}[a0_0x322ae2(0x204)](){const _0x7a8b49=a0_0x322ae2;dom[_0x7a8b49(0x21f)]('pointerdown',this[_0x7a8b49(0x234)]),dom[_0x7a8b49(0x21f)](_0x7a8b49(0x1f8),this['mouseUp']),controls[_0x7a8b49(0x21f)]('start',this[_0x7a8b49(0x255)]);}}export default Change;